name: "kubernetes"
label: "Kubernetes"
description: >
  Single-master Kubernetes cluster using Rancher Kubernetes Engine (RKE).
logo: https://user-images.githubusercontent.com/13452123/59425960-e5d17680-8dce-11e9-86c4-ffe3cbff6701.png

parameters:
  - name: "identity_stack_name"
    label: "Identity manager"
    description: >
      The identity manager for managing access to the cluster.
    kind: "cloud.cluster"
    options:
      tag: identity
    immutable: true

  - name: "kubernetes_version"
    label: "Version"
    description: "The Kubernetes version to use."
    kind: "choice"
    options:
      choices: ["1.11", "1.12", "1.13", "1.14"]
    default: "1.13"

  - name: "cluster_num_workers"
    label: "Worker nodes"
    description: "The number of worker nodes in the cluster."
    kind: "integer"
    options:
      min: 1
    default: 3

  - name: "cluster_master_flavor"
    label: "Master size"
    description: "The size to use for the master node."
    kind: "cloud.size"
    options:
      min_cpus: 2
      min_ram: 2048
    immutable: true

  - name: "cluster_worker_flavor"
    label: "Worker size"
    description: "The size to use for the worker nodes."
    kind: "cloud.size"
    options:
      min_cpus: 2
      min_ram: 2048
    immutable: true

  - name: "cluster_root_volume_size"
    label: "Root volume size (GB)"
    description: The size of the root volume of cluster nodes.
    kind: "integer"
    options:
      min: 20
    immutable: true
    default: 40

  - name: "cluster_fixed_ip"
    label: "External IP"
    description: |
      The external IP to attach to the master node.

      If not selected, the cluster will not be directly accessible from outside your tenancy.
    kind: "cloud.ip"
    required: false
    immutable: true
