name: "Pangeo"
label: "Pangeo"
description: "The Pangeo software stack running on Kubernetes."
logo: "https://raw.githubusercontent.com/pangeo-data/branding/master/logo/pangeo_simple_logo.png"

parameters:
  - name: identity_stack_name
    label: "Identity manager"
    description: >
      The identity manager for managing access to the cluster.
    kind: "cloud.cluster"
    options:
      tag: identity
    immutable: true

  - name: kubernetes_version
    label: "Version"
    description: "The Kubernetes version to use."
    kind: "choice"
    options:
      choices: ["1.11", "1.12", "1.13", "1.14"]
    default: "1.13"

  - name: cluster_num_workers
    label: "Worker nodes"
    description: "The number of worker nodes in the cluster."
    kind: "integer"
    options:
      min: 1
    default: 3

  - name: cluster_master_flavor
    label: "Master size"
    description: "The size to use for the master node."
    kind: "cloud.size"
    options:
      min_cpus: 2
      min_ram: 2048
    immutable: true

  - name: cluster_worker_flavor
    label: "Worker size"
    description: "The size to use for the worker nodes."
    kind: "cloud.size"
    options:
      min_cpus: 4
      min_ram: 8192
    immutable: true

  - name: cluster_root_volume_size
    label: "Root volume size (GB)"
    description: The size of the root volume of cluster nodes.
    kind: "integer"
    options:
      min: 20
    immutable: true
    default: 40

  - name: cluster_fixed_ip
    label: "External IP"
    description: The external IP to attach to the master node.
    kind: "cloud.ip"
    immutable: true

  - name: pangeo_notebook_cpu
    label: Notebook CPUs
    description: The number of CPUs to allocate to each user notebook.
    kind: integer
    options:
      min: 1
    default: 1

  - name: pangeo_notebook_mem
    label: Notebook RAM (GB)
    description: The amount of RAM to allocate to each user notebook.
    kind: integer
    options:
      min: 1
    default: 2

  - name: pangeo_notebook_storage
    label: Notebook storage (GB)
    description: |
      The amount of storage to allocate to each user notebook.

      This is dynamically provisioned and does not come out of the root volume.
    kind: integer
    options:
      min: 1
    default: 10

  - name: pangeo_domain
    label: Pangeo domain
    description: |
      The domain to use to access Pangeo (optional).

      If not given, `pangeo.<ip>.nip.io` will be used, which requires no action.

      If given, a DNS entry for the domain pointing to the selected IP
      must already exist. A DNS entry will **not** be created for you,
      and the lack of a correct DNS entry will cause configuration to fail.
    kind: string
    immutable: true
    required: false
