#####
## THIS FILE IS GENERATED BY ANSIBLE
#####

{% include "nginx/http_redirect.fragment.j2" %}

server {
    listen 443 ssl default_server;
    server_name _;

    {% include "nginx/ssl_params.fragment.j2" %}

    location / {
        # FreeIPA uses the Referer header to avoid MITM attacks, so spoof it...
        proxy_set_header Referer https://{{ freeipa_host.ansible_fqdn }}/ipa/ui;
        proxy_pass https://{{ freeipa_host.ansible_fqdn }}/;
    }
}
